<style>
    .browser-deleted-page {
        display: none;
        margin-right: 2%;
    }

    /* page toolbar */
    .browser-deleted-page .top-toolbar {
        margin-top: 20px;
        margin-left: 20px;
    }

    .top-toolbar-search {
        background-color: rgba(223, 223, 223, 0.555);
        width: 400px;
        padding: 13px;
        font-size: small;
        border: none;
        outline: none;
        color: gray;
        border-radius: 4px;
    }

    /* categorizer */
    .deleted-categorizer {
        margin-top: 20px;
        padding-left: 20px;
        padding-top: 10px;
        padding-bottom: 10px;
        display: grid;
        grid-template-columns: 10% 30% 20% 20% 10%;
        border-bottom: solid 1px rgba(235, 235, 235, 0.685);
    }

    /* deleted file item */
    .deleted-file-item {
        padding-left: 20px;
        padding-top: 10px;
        padding-bottom: 10px;
        display: grid;
        grid-template-columns: 10% 30% 20% 20% 10%;
        border-bottom: solid 1px rgba(235, 235, 235, 0.685);
        transition: all 0.1s ease;
        grid-template-columns: 10% 30% 20% 20% 10%;
    }


</style>

<div class="browser-deleted-page">
    <div class="top-toolbar">
        <input class="top-toolbar-search" placeholder="Search for deleted file" type="search">
    </div>

    <!-- categorizer -->
    <div class="deleted-categorizer">
        <div class=""><input  type="checkbox"></div>
        <div class="categorizer-text">Identification</div>
        <div class="categorizer-text">Name</div>
        <div class="categorizer-text hide-mobile ">Deleted-by</div>
        <div class="categorizer-text hide-mobile ">Deleted</div>
    </div>

    <!-- deleted items -->
    <div id="bodyDeletedFiles" class="deleted-files-list">

        <!-- deleted file item-->
        <div class="deleted-file-item">
            <div class=""><input  type="checkbox"></div>
            <div class="categorizer-text">OA4S39AO6RZGH3...89MNPBV9ZW6</div>
            <div class="categorizer-text">Name</div>
            <div class="categorizer-text hide-mobile ">Deleted-by</div>
            <div class="categorizer-text hide-mobile ">Deleted</div>
        </div>

    </div>

</div>

<script>
    var deletedPageBrowser 
    let deletedObjectArray 

    //classes 
    let deletedFile = class {
        constructor(jsonObject){
            this.id = jsonObject["fileID"]
            this.name = jsonObject["name"]
            this.deleted_by = jsonObject["deletedBy"]
            this.deleted = jsonObject["deleted"]

            //trim name 
            this.trimName()
        }

        trimName(){
            if (this.name.length > 25){
                this.name =  this.name.substring(0, 25) + "..."
            }
        }

        trimID(){
            var frontPart = this.id.substring(0, 15) + "..."
            var backPart =  this.id.substring(0, 15)
            alert(backPart)
        }

        
    }


    window.addEventListener("DOMContentLoaded",()=>{
        deletedPageBrowser = document.querySelector(".browser-deleted-page")
    })

    function showBrowserDeletedPage(){
        deletedPageBrowser .style.display = "block"
        //get deleted files
        getDeletedFiles()
    }

    function hideBrowserDeletedPage(){
        deletedPageBrowser .style.display = "none"
    }

    function getDeletedFiles(){
        var bodyToShow = document.getElementById("bodyDeletedFiles")
        //get objects from the server 
        data = {
            "project" : localStorage.getItem("working-project")
        }
        postToServer("/api/get-deleted-files/", data, function(responce) {
            if (responce == "500" || responce == "not found"){}
            else{
                deletedObjectArray = JSON.parse(responce)

                //iterate objects
                deletedObjectArray.forEach(element => {
                    //new deleted file object
                    var newDeletedFile = new deletedFile(element)

                    //frame to add to UI
                    var frame = `
                    <div class="deleted-file-item">
                        <div class=""><input  type="checkbox"></div>
                        <div class="categorizer-text">OA4S39AO6RZGH3...89MNPBV9ZW6</div>
                        <div class="categorizer-text">${newDeletedFile.name}</div>
                        <div class="categorizer-text hide-mobile ">${newDeletedFile.deleted_by}</div>
                        <div class="categorizer-text hide-mobile ">${newDeletedFile.deleted}</div>
                    </div>
                    `

                    //add to UI
                    bodyToShow.innerHTML += frame ;
                });
            }
        })

    }


</script>